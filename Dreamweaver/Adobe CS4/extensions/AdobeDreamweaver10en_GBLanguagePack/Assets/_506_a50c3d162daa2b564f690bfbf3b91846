<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--#config errmsg="" --><!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta name="lang" content="en-us" />
        <meta name="area" content="livedocs" />
        <title>Dreamweaver CS4 * Repeating code blocks with the loop directive</title>
        <meta name="product" content="$product" />
        <meta name="productv" content="" />
        <meta name="keywords" content="" />
        <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc78c5058ca073340dcda9110b1f693f21-7954a.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> 
<script type="text/javascript">
<!--[CDATA[
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
    var linkId = document.createElement("link");
    linkId.href = "content-ie6.css";
    linkId.rel = "stylesheet";
    linkId.type = "text/css";
    headId.appendChild(linkId);
}
// ]]-->
</script>
<!--#include virtual="/livedocs/ssi/globalheader.ssi" -->
        <link rel="stylesheet" type="text/css" href="tree.css" />
        <link rel="stylesheet" type="text/css" href="content-fonts.css" />
        <link rel="stylesheet" type="text/css" href="content-hyperlinks.css" />
        <link rel="stylesheet" type="text/css" href="content.css" />
        <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
    </head>
    <body id="content_body" onload="window.focus();">
        <a name="top"></a><div id="mnemonic">
            <div class="Dreamweaver"><table><tr><td class="banner">Dreamweaver CS4</td><td class="pod"><img src="images/PDF.gif" width="16" height="16" hspace="15" valign="50%" />&#160;&#160;
                     <a title="PDF" href="http://help.adobe.com/en_US/Dreamweaver/10.0_Using/dreamweaver_cs4_help.pdf">
                         PDF (adobe.com) 
                    </a></td></tr></table></div>
        </div>
        <div id="searchbar">
<!-- BEGIN SEARCH CONTENT -->
            <form class="search_form" id="search" name="search" action="search.html" target="_self">
                <img src="images/search.png" />
<script type="text/javascript">
<!--[CDATA[
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}
document.write('<input class=\"search_input\" \
        name=\"q\" \
        id=\"q\" \
        type=\"text\" \
        maxlength=\"256\" \
        value=\"' + terms_AHV_SEARCH_BUTTON + '\" onclick=\"clearSearch()\"><\/input>'); 
// ]]-->


</script> 
            </form>
        </div>
<!-- BEGIN PAGE CONTENT WRAPPER -->
        <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>
<td id="col1">
<!-- BEGIN IONCOMMENTCOUNT -->
            <div id="ionComCount">
            </div>
<!-- END IONCOMMENTCOUNT -->
<!-- BEGIN GROUP TOC WRAPPER -->
            <div id="group_toc"><p>Dreamweaver CS4 Resources</p><ul><li><p><a href="../../Dreamweaver/10.0/index.html" target="_blank">Using
Dreamweaver CS4</a></p>
</li><li><p><a href="http://help.adobe.com/en_US/Dreamweaver/10.0_Extending/index.html" target="_blank">Extending Dreamweaver CS4 (adobe.com)</a></p>
</li><li><p><a href="http://help.adobe.com/en_US/Dreamweaver/10.0_API_Ref/index.html" target="_blank">Dreamweaver API Reference (adobe.com)</a></p>
</li></ul></div>
<!-- END GROUP TOC WRAPPER -->
<!-- BEGIN NAV WRAPPER -->
            <div id="group_toc">
<script type="text/javascript">
<!--[CDATA[
if ( typeof(terms_BOOK_SHORT) != 'undefined' ) {
  document.write("<p>" + terms_BOOK_SHORT + "<\/p>");
}
// ]]-->


</script> 
            </div>
            <div id="nav_content">
            </div>
<!-- END NAV WRAPPER -->
</td>
<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->
            
            <div id="breadcrumb">
                
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WS236D6363-1062-464c-BD8A-7576739DFACAa.html" title="Positioning a code block"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSC069814B-664C-4eec-910E-0BCFCC4D4812a.html" title="Request a parameter for the server behavior"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy"><a href="WSc78c5058ca073340dcda9110b1f693f21-79bea.html">Making pages dynamic</a> /
     <a href="WSc78c5058ca073340dcda9110b1f693f21-7954a.html"><b>Adding custom server behaviors</b></a> 
     </div>

            </div>
<!-- END BREADCRUMBS -->
            <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
                <h1>
                    Repeating code blocks with the loop directive
                </h1>
<!-- END PAGE TITLE -->
                <div><p>To repeat a portion of a code block or the entire code
block a number of times, use the following syntax:</p>
<pre>&lt;@ loop (<dfn class="term">@@param1@@,@@param2@@</dfn>) @&gt;    <dfn class="term">code
block</dfn>&lt;@ endloop @&gt;</pre>
<div class="para">When creating server behaviors, you can use looping constructs
to repeat a code block a specified number of times. <pre>&lt;@ loop (<dfn class="term">@@param1@@,@@param2@@,@@param3@@,@@param_n@@</dfn>) @&gt;    code block 
&lt;@ endloop @&gt;</pre>
The loop directive accepts a comma-separated
list of parameter arrays as arguments. In this case, parameter array
arguments allow a user to supply multiple values for a single parameter.
The repeating text is duplicated <dfn class="term">n</dfn> times, where <dfn class="term">n</dfn> is
the length of the parameter array arguments. If more than one parameter
array argument is specified, all the arrays must have the same length. On
the <dfn class="term">i</dfn>th evaluation of the loop, the <dfn class="term">i</dfn>th
elements of the parameter arrays replace the associated parameter
instances in the code block. </div>
<p>When you create a dialog box for the server behavior, you can
add a control to the dialog box that lets the page designer create
parameter arrays. Dreamweaver includes a
simple array control that you can use to create dialog boxes. This
control, called Text Field Comma Separated List, is available through
the Server Behavior Builder. To create user interface elements of
greater complexity, see the API documentation to create a dialog
box with a control to create arrays (a grid control, for example).</p>
<p>You can nest any number of conditionals or a loop directive within
a conditional directive. For example, you can specify that if an
expression is true to execute a loop.</p>
<p>The following example shows how such repeating code blocks can
be used to create server behaviors (the example is a ColdFusion
behavior used to access a stored procedure):</p>
<pre>&lt;CFSTOREDPROC procedure="AddNewBook" 
    datasource=#MM_connection_DSN# 
    username=#MM_connection_USERNAME# 
    password=#MM_connection_PASSWORD#&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@CategoryId" value="#Form.CategoryID#" 
    cfsqltype="CF_SQL_INTEGER"&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@ISBN" value="#Form.ISBN#" 
    cfsqltype="CF_SQL_VARCHAR"&gt; 
&lt;/CFSTOREDPROC&gt;</pre>
<p>In this example, the <samp class="codeph">CFSTOREDPROC</samp> tag can include
zero or more <samp class="codeph">CFPROCPARAM</samp> tags. However, without
support for the loop directive, there is no way to include the <samp class="codeph">CFPROCPARAM</samp> tags
within the inserted <samp class="codeph">CFSTOREDPROC</samp> tag. If this were
to be created as a server behavior without the use of the loop directive,
you would need to divide this example into two participants: a main <samp class="codeph">CFSTOREDPROC</samp> tag,
and a <samp class="codeph">CFPROCPARAM</samp> tag whose participant type is multiple.</p>
<p>Using the loop directive, you can write the same procedure as
follows:</p>
<pre>&lt;CFSTOREDPROC procedure="@@procedure@@" 
datasource=#MM_@@conn@@_DSN# 
username=#MM_@@conn@@_USERNAME# 
password=#MM_@@conn@@_PASSWORD#&gt; 
&lt;@ loop (@@paramName@@,@@value@@,@@type@@) @&gt; 
    &lt;CFPROCPARAM type="IN" 
    dbvarname="@@paramName@@" 
    value="@@value@@" 
    cfsqltype="@@type@@"&gt; 
&lt;@ endloop @&gt; 
&lt;/CFSTOREDPROC&gt;</pre>
<div class="para"><div class="note"><span class="notetitle">Note:  </span>New lines after each “@&gt;” are ignored.</div>
</div>
<p>If the user entered the following parameter values in the Server
Behavior Builder dialog box:</p>
<pre>procedure = "proc1" 
conn = "connection1" 
paramName = ["@CategoryId", "@Year", "@ISBN"] 
value = ["#Form.CategoryId#", "#Form.Year#", "#Form.ISBN#"] 
type = ["CF_SQL_INTEGER", "CF_SQL_INTEGER", "CF_SQL_VARCHAR"]</pre>
<p>The server behavior would insert the following run-time code
in the page:</p>
<pre>&lt;CFSTOREDPROC procedure="proc1" 
datasource=#MM_connection1_DSN# 
username=#MM_connection1_USERNAME# 
password=#MM_connection1_PASSWORD#&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@CategoryId" value="#Form.CategoryId#" 
    cfsqltype="CF_SQL_INTEGER"&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@Year" value="#Form.Year#" 
    cfsqltype="CF_SQL_INTEGER"&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@ISBN" value="#Form.ISBN#" 
    cfsqltype="CF_SQL_VARCHAR"&gt; 
&lt;/CFSTOREDPROC&gt;</pre>
<div class="note"><span class="notetitle">Note:  </span>Parameter arrays cannot be used outside of a loop except as
part of a conditional directive expression.</div>
<div class="section"><h4 class="sectiontitle">Using the loop directive’s _length and _index variables</h4><p>The
loop directive includes two built‑in variables that you can use
for embedded <samp class="codeph">if</samp> conditions. The variables are: <samp class="codeph">_length</samp> and <samp class="codeph">_index</samp>.
The <samp class="codeph">_length</samp> variable evaluates to the length of
the arrays processed by the loop directive, while the <samp class="codeph">_index</samp> variable
evaluates to the current index of the loop directive. To ensure that
the variables are only recognized as directives, and not as actual
parameters to be passed into the loop, do not enclose either variable
in <samp class="codeph">@@</samp>s. </p>
<p>An example of using built‑in variables
is to apply them to the <samp class="codeph">import</samp> attribute of the
page directive. The <samp class="codeph">import</samp> attribute requires comma
separation of packages. If the <samp class="codeph">loop</samp> directive extends
around the entire <samp class="codeph">import</samp> attribute, you would only
output the attribute name <samp class="codeph">import=</samp> on the first
iteration of the loop—this includes the closing double quote (")—and
not output a comma on the last iteration of the loop. Using the
built‑in variable, you can express this as follows:</p>
<pre>&lt;@loop (@@Import@@)@&gt; 
&lt;@ if(_index == 0)@&gt;import=" 
&lt;@endif@&gt;@@Import@@&lt;@if (_index == _length-1)@&gt;"&lt;@else@&gt;, 
&lt;@ endif @&gt; 
&lt;@endloop@&gt;</pre>
</div>
</div>

                <div id="related">
                    <div class="separator">&#160;</div>
                    
                    
                </div>
                <div id="footer">
                    <p><img src="images/Community.png" />&#160;<a title="community help (adobe.com)" href="http://www.adobe.com/go/lr_Dreamweaver_community_en">community help (adobe.com)</a></p>
<!-- BEGIN IONCOMMENTS -->
                    <div id="ionComHere">
                    </div>
<!-- END IONCOMMENTS -->
<!--#include virtual="ionComments.ssi" -->
                    <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" /></a></p>
                </div>
            </div>
<!-- END CONTENT WRAPPER -->
</td>
</tr>
</table>
        </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--#include virtual="/livedocs/ssi/globalfooter.ssi" -->
<!--#include virtual="/ubi/analytics/analytics_ssi.html" -->
    </body>
</html>