<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--#config errmsg="" --><!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="fr-fr">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta name="lang" content="fr-fr" />
        <meta name="area" content="livedocs" />
        <title>Dreamweaver CS4 * Répétitions des blocs de code avec la directive de boucle</title>
        <meta name="product" content="$product" />
        <meta name="productv" content="" />
        <meta name="keywords" content="" />
        <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc78c5058ca073340dcda9110b1f693f21-7954a.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> 
<script type="text/javascript">
<!--[CDATA[
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
    var linkId = document.createElement("link");
    linkId.href = "content-ie6.css";
    linkId.rel = "stylesheet";
    linkId.type = "text/css";
    headId.appendChild(linkId);
}
// ]]-->
</script>
<!--#include virtual="/livedocs/ssi/globalheader.ssi" -->
        <link rel="stylesheet" type="text/css" href="tree.css" />
        <link rel="stylesheet" type="text/css" href="content-fonts.css" />
        <link rel="stylesheet" type="text/css" href="content-hyperlinks.css" />
        <link rel="stylesheet" type="text/css" href="content.css" />
        <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
    </head>
    <body id="content_body" onload="window.focus();">
        <a name="top"></a><div id="mnemonic">
            <div class="Dreamweaver"><table><tr><td class="banner">Dreamweaver CS4</td><td class="pod"><img src="images/PDF.gif" width="16" height="16" hspace="15" valign="50%" />&#160;&#160;
                     <a title="PDF" href="http://help.adobe.com/fr_FR/Dreamweaver/10.0_Using/dreamweaver_cs4_help.pdf">
                         PDF (adobe.com) 
                    </a></td></tr></table></div>
        </div>
        <div id="searchbar">
<!-- BEGIN SEARCH CONTENT -->
            <form class="search_form" id="search" name="search" action="search.html" target="_self">
                <img src="images/search.png" />
<script type="text/javascript">
<!--[CDATA[
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}
document.write('<input class=\"search_input\" \
        name=\"q\" \
        id=\"q\" \
        type=\"text\" \
        maxlength=\"256\" \
        value=\"' + terms_AHV_SEARCH_BUTTON + '\" onclick=\"clearSearch()\"><\/input>'); 
// ]]-->


</script> 
            </form>
        </div>
<!-- BEGIN PAGE CONTENT WRAPPER -->
        <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>
<td id="col1">
<!-- BEGIN IONCOMMENTCOUNT -->
            <div id="ionComCount">
            </div>
<!-- END IONCOMMENTCOUNT -->
<!-- BEGIN GROUP TOC WRAPPER -->
            <div id="group_toc"><p>Ressources de Dreamweaver CS4</p><ul><li><p><a href="../../Dreamweaver/10.0/index.html" target="_blank">Utilisation de Dreamweaver CS4</a></p>
</li><li><p><a href="http://help.adobe.com/fr_FR/Dreamweaver/10.0_Extending/index.html" target="_blank">Extension de Dreamweaver CS4 (adobe.com)</a></p>
</li><li><p><a href="http://help.adobe.com/fr_FR/Dreamweaver/10.0_API_Ref/index.html" target="_blank">Référence de l'API Dreamweaver (adobe.com)</a></p>
</li></ul></div>
<!-- END GROUP TOC WRAPPER -->
<!-- BEGIN NAV WRAPPER -->
            <div id="group_toc">
<script type="text/javascript">
<!--[CDATA[
if ( typeof(terms_BOOK_SHORT) != 'undefined' ) {
  document.write("<p>" + terms_BOOK_SHORT + "<\/p>");
}
// ]]-->


</script> 
            </div>
            <div id="nav_content">
            </div>
<!-- END NAV WRAPPER -->
</td>
<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->
            
            <div id="breadcrumb">
                
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WS236D6363-1062-464c-BD8A-7576739DFACAa.html" title="Positionnement d'un bloc de code"><img src="images/blank.gif" alt="Précédent" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSC069814B-664C-4eec-910E-0BCFCC4D4812a.html" title="Demande d'un paramètre pour le comportement de serveur"><img src="images/blank.gif" alt="Suivant" width="17" height="17" /></a></li></ul><div class="hierarchy"><a href="WSc78c5058ca073340dcda9110b1f693f21-79bea.html">Ajout de contenu dynamique aux pages Web</a> /
     <a href="WSc78c5058ca073340dcda9110b1f693f21-7954a.html"><b>Ajout de comportements de serveur personnalisés</b></a> 
     </div>

            </div>
<!-- END BREADCRUMBS -->
            <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
                <h1>
                    Répétitions des blocs de code avec la directive de boucle
                </h1>
<!-- END PAGE TITLE -->
                <div><p>Pour répéter un bloc de code, ou une partie de celui-ci, un certain nombre de fois, utilisez la syntaxe suivante&#160;:</p>
<pre>&lt;@ loop (<dfn class="term">@@param1@@,@@param2@@</dfn>) @&gt;    <dfn class="term">code
block</dfn>&lt;@ endloop @&gt;</pre>
<div class="para">Lors de la création de comportements de serveur, vous pouvez utiliser des structures de boucle pour répéter un bloc de code un nombre défini de fois. <pre>&lt;@ loop (<dfn class="term">@@param1@@,@@param2@@,@@param3@@,@@param_n@@</dfn>) @&gt;    code block 
&lt;@ endloop @&gt;</pre>
La directive de boucle accepte des arguments se présentant sous la forme d'une liste de tableaux de paramètre séparés par des virgules. Dans ce cas, les arguments des tableaux de paramètre permettent aux utilisateurs de fournir plusieurs valeurs pour un même paramètre. Le texte répétitif sera dupliqué <dfn class="term">n</dfn> fois, <dfn class="term">n</dfn> correspondant à la longueur des arguments des tableaux de paramètre. Si plusieurs arguments de tableaux de paramètre sont indiqués, tous les tableaux doivent être de la même longueur. Lors de la <dfn class="term">n</dfn>ième évaluation de la boucle, les <dfn class="term">n</dfn>ièmes éléments des tableaux de paramètre remplacent les occurrences du paramètre correspondant dans le bloc de code. </div>
<p>Lorsque vous créez une boîte de dialogue pour le comportement de serveur, vous pouvez ajouter une commande à la boîte de dialogue qui permet au concepteur de la page de créer des tableaux de paramètre. Dreamweaver inclut une commande de tableau simple que vous pouvez utiliser pour créer des boîtes de dialogue. Cette commande, qui s'appelle Liste de champs de texte séparés par des virgules, est accessible à partir du Créateur de comportements de serveur. Pour créer des éléments d'interface utilisateur plus complexes et apprendre à concevoir une boîte de dialogue contenant une commande de création de tableaux (commande de grille, par exemple), consultez la documentation&#160;API.</p>
<p>Vous pouvez imbriquer autant de directives conditionnelles ou de boucle que vous le souhaitez au sein d'une même directive conditionnelle. Ainsi pouvez-vous préciser, par exemple, que si une expression est vraie, la boucle doit être exécutée.</p>
<p>L'exemple suivant montre comment utiliser des blocs de code répétitifs pour créer des comportements de serveur (cet exemple correspond à un comportement ColdFusion permettant d'accéder à une procédure stockée)&#160;:</p>
<pre>&lt;CFSTOREDPROC procedure="AddNewBook" 
    datasource=#MM_connection_DSN# 
    username=#MM_connection_USERNAME# 
    password=#MM_connection_PASSWORD#&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@CategoryId" value="#Form.CategoryID#" 
    cfsqltype="CF_SQL_INTEGER"&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@ISBN" value="#Form.ISBN#" 
    cfsqltype="CF_SQL_VARCHAR"&gt; 
&lt;/CFSTOREDPROC&gt;</pre>
<p>Dans cet exemple, la balise <samp class="codeph">CFSTOREDPROC</samp> peut comprendre zéro ou davantage de balises <samp class="codeph">CFPROCPARAM</samp>. Toutefois, sans prise en charge de la directive de boucle, il est impossible d'inclure les balises <samp class="codeph">CFPROCPARAM</samp> au sein de la balise <samp class="codeph">CFSTOREDPROC</samp> insérée. Si vous vous inspiriez de cet exemple pour créer un comportement de serveur sans la directive de boucle, il vous faudrait le diviser en deux participants&#160;: une balise <samp class="codeph">CFSTOREDPROC</samp> principale et une balise <samp class="codeph">CFPROCPARAM</samp> dont le type de participant serait multiple.</p>
<p>Avec la directive de boucle, il est possible de rédiger cette même procédure comme suit&#160;:</p>
<pre>&lt;CFSTOREDPROC procedure="@@procedure@@" 
datasource=#MM_@@conn@@_DSN# 
username=#MM_@@conn@@_USERNAME# 
password=#MM_@@conn@@_PASSWORD#&gt; 
&lt;@ loop (@@paramName@@,@@value@@,@@type@@) @&gt; 
    &lt;CFPROCPARAM type="IN" 
    dbvarname="@@paramName@@" 
    value="@@value@@" 
    cfsqltype="@@type@@"&gt; 
&lt;@ endloop @&gt; 
&lt;/CFSTOREDPROC&gt;</pre>
<div class="para"><div class="note"><span class="notetitle">Remarque&#160;:  </span>Les nouvelles lignes situées après chaque élément «&#160;@&gt;&#160;» sont ignorées.</div>
</div>
<p>Supposons que l'utilisateur ait tapé les valeurs de paramètre suivantes dans la boîte de dialogue Créateur de comportements de serveur&#160;:</p>
<pre>procedure = "proc1" 
conn = "connection1" 
paramName = ["@CategoryId", "@Year", "@ISBN"] 
value = ["#Form.CategoryId#", "#Form.Year#", "#Form.ISBN#"] 
type = ["CF_SQL_INTEGER", "CF_SQL_INTEGER", "CF_SQL_VARCHAR"]</pre>
<p>Le comportement de serveur insérerait alors le code d'exécution suivant dans la page&#160;:</p>
<pre>&lt;CFSTOREDPROC procedure="proc1" 
datasource=#MM_connection1_DSN# 
username=#MM_connection1_USERNAME# 
password=#MM_connection1_PASSWORD#&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@CategoryId" value="#Form.CategoryId#" 
    cfsqltype="CF_SQL_INTEGER"&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@Year" value="#Form.Year#" 
    cfsqltype="CF_SQL_INTEGER"&gt; 
&lt;CFPROCPARAM type="IN" dbvarname="@ISBN" value="#Form.ISBN#" 
    cfsqltype="CF_SQL_VARCHAR"&gt; 
&lt;/CFSTOREDPROC&gt;</pre>
<div class="note"><span class="notetitle">Remarque&#160;:  </span>Il est impossible d'utiliser les tableaux de paramètre en dehors d'une boucle, sauf en tant que composants d'une expression de directive conditionnelle.</div>
<div class="section"><h4 class="sectiontitle">Utilisation des variables _length et _index de la directive de boucle</h4><p>La directive de boucle comprend deux variables intégrées utilisables dans les conditions <samp class="codeph">if</samp> incorporées. Ces variables sont les suivantes&#160;: <samp class="codeph">_length</samp> et <samp class="codeph">_index</samp>. La variable <samp class="codeph">_length</samp> se rapporte à la longueur des tableaux traités par la directive de boucle, alors que la variable <samp class="codeph">_index</samp> se rapporte à l'index actuel de la directive loop elle-même. Pour que ces variables ne soient reconnues qu'en tant que directives et non en tant que paramètres à faire passer par la boucle, ne les insérez pas entre des symboles <samp class="codeph">@@</samp>. </p>
<p>Un exemple d'utilisation des variables intégrées consiste à les appliquer à l'attribut <samp class="codeph">import</samp> de la directive de page. L'attribut <samp class="codeph">import</samp> requiert que les paquets soient séparés par des virgules. Si la directive <samp class="codeph">loop</samp> englobe l'intégralité de l'attribut <samp class="codeph">import</samp>, le nom d'attribut <samp class="codeph">import=</samp> ne doit sortir qu'à la première itération de la boucle (les guillemets fermants (") sont alors inclus) et aucune virgule n'apparaît à la dernière itération de la boucle. Pour ce faire, vous pouvez utiliser la variable intégrée comme suit&#160;:</p>
<pre>&lt;@loop (@@Import@@)@&gt; 
&lt;@ if(_index == 0)@&gt;import=" 
&lt;@endif@&gt;@@Import@@&lt;@if (_index == _length-1)@&gt;"&lt;@else@&gt;, 
&lt;@ endif @&gt; 
&lt;@endloop@&gt;</pre>
</div>
</div>

                <div id="related">
                    <div class="separator">&#160;</div>
                    
                    
                </div>
                <div id="footer">
                    <p><img src="images/Community.png" />&#160;<a title="Aide des communautés (adobe.fr)" href="http://www.adobe.com/go/lr_Dreamweaver_community_fr">Aide des communautés (adobe.fr)</a></p>
<!-- BEGIN IONCOMMENTS -->
                    <div id="ionComHere">
                    </div>
<!-- END IONCOMMENTS -->
<!--#include virtual="ionComments.ssi" -->
                    <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="Ce produit est distribué sous licence Creative Commons Paternité-Pas d'Utilisation Commerciale-Partage des Conditions Initiales à l'Identique 3.0 Unported" /></a></p>
                </div>
            </div>
<!-- END CONTENT WRAPPER -->
</td>
</tr>
</table>
        </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--#include virtual="/livedocs/ssi/globalfooter.ssi" -->
<!--#include virtual="/ubi/analytics/analytics_ssi.html" -->
    </body>
</html>